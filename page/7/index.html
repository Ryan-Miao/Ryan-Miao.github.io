<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Ryan Miao的博客 - 知行合一</title><meta name="keywords" content="Java"><meta name="author" content="Ryan Miao"><meta name="copyright" content="Ryan Miao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="技术总结">
<meta property="og:type" content="website">
<meta property="og:title" content="Ryan Miao的博客">
<meta property="og:url" content="http://blog.rmiao.top/page/7/index.html">
<meta property="og:site_name" content="Ryan Miao的博客">
<meta property="og:description" content="技术总结">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/avatar.jpg">
<meta property="article:author" content="Ryan Miao">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/avatar.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://blog.rmiao.top/page/7/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="maTgu7CiAQC-q4KDPYtjkPcCNliwRuCX8IuThKKIZzo"/><meta name="baidu-site-verification" content="code-HNJaUItPgZ"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-9728761484167276',
  enable_page_level_ads: 'true'
});</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?caff024b07e794f2b6ef044008b2acd3";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: {"text":"开心,美丽,大方,正直,原则,可爱,坚韧,靠谱,斜杠青年,幸运,善良,你真棒","fontSize":"15px"},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2020-11-13 03:12:49'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">92</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">60</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">42</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/index.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Ryan Miao的博客</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="site-info"><h1 id="site-title">Ryan Miao的博客</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/ryan-miao" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:woshimrf@126.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2017/10/22/english-mark/" title="技术开发中一些名词解释">     <img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="技术开发中一些名词解释"></a></div><div class="recent-post-info"><a class="article-title" href="/2017/10/22/english-mark/" title="技术开发中一些名词解释">技术开发中一些名词解释</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2017-10-22T04:35:49.000Z" title="发表于 2017-10-22 12:35:49">2017-10-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/English/">English</a></span></div><div class="content">
前言现在还记得第一次面试的时候，被问HTML全称是什么，这才意识到记住全称并不是无理取闹，而是个人对这项技术的理解程度还没到。当你去了解一个技术的时候，名词是首先要掌握的，除非你只是皮毛。




常规


英文
全称
desc



HTTP
HyperText Transfer Protocol
超文本传输协议


HTML
HyperTextMark-upLanguage
超文本标记语言


API
Application Programming Interface
接口


SQL
Structured Query Language
结构化查询语言


NoSQL
Not only SQL
不仅仅是sql


GUI
Graphical User Interface
图形用户界面


IDE
Integrated Development Environment
集成开发环境


URL
Uniform Resoure Locator
统一资源定位符


Java


英文
全称
desc



JDK
Java Development Kit
Java开发工具


JVM
J ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2017/10/18/git-workflow/" title="Git 工作流">     <img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git 工作流"></a></div><div class="recent-post-info"><a class="article-title" href="/2017/10/18/git-workflow/" title="Git 工作流">Git 工作流</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2017-10-18T13:44:53.000Z" title="发表于 2017-10-18 21:44:53">2017-10-18</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Git/">Git</a></span></div><div class="content">
前言一直在使用git做版本控制，也一直工作很顺利，直到和别人发生冲突的时候。这才注意到git 工作流并不是那么简单。比如，之前遇到的清理历史。百度到的资料很多，重复性也很多，但实践性操作很少，我很难直接理解其所表达的含义。直接望文生义经常得到错误的结论，只能用时间去检验真理了，不然看到的结果都是似懂非懂，最后还是一团糟。


学习git工作流1. 最简单的使用，不推荐1.1.创建仓库1234567891011121314151617181920212223242526$ pwd&#x2F;home&#x2F;ryan&#x2F;workspace&#x2F;l4git-workflow$ touch readme.md$ lsreadme.md$ touch .gitignore$ git init初始化空的 Git 仓库于 &#x2F;home&#x2F;ryan&#x2F;workspace&#x2F;l4git-workflow&#x2F;.git&#x2F;$ touch test.txt$ git add .$ git commit -m &quot;init&quot;[ ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2017/10/17/Ubuntu-install-java8-java9/" title="Ubuntu安装java8和java9">     <img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ubuntu安装java8和java9"></a></div><div class="recent-post-info"><a class="article-title" href="/2017/10/17/Ubuntu-install-java8-java9/" title="Ubuntu安装java8和java9">Ubuntu安装java8和java9</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2017-10-17T14:04:55.000Z" title="发表于 2017-10-17 22:04:55">2017-10-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Ubuntu/">Ubuntu</a></span></div><div class="content">


安装Jave81. 导入Webupd8 PPA123sudo add-apt-repository ppa:webupd8team&#x2F;javasudo apt-get update

2. 安装1sudo apt-get install oracle-java8-installer
选择确认条款，用Tab键切换。
3. 设置为默认jdk12&#x2F;&#x2F;sudo update-java-alternatives -s java-8-oraclesudo apt install oracle-java8-set-default



安装Java91. 导入Webupd8 PPA123sudo add-apt-repository -y ppa:webupd8team&#x2F;javasudo apt-get update

2. 安装1sudo apt-get install oracle-java9-installer
选择确认条款，用Tab键切换。
3. 设置环境变量1sudo apt-get install oracle-java9-set-defaul ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2017/10/17/javaguide/" title="Google styleguide 之 javaguide">     <img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Google styleguide 之 javaguide"></a></div><div class="recent-post-info"><a class="article-title" href="/2017/10/17/javaguide/" title="Google styleguide 之 javaguide">Google styleguide 之 javaguide</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2017-10-17T12:55:10.000Z" title="发表于 2017-10-17 20:55:10">2017-10-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span></div><div class="content">前一阵都在看阿里巴巴Java开发手册，然后看到有人说google的直接放网上了。看了下，发现只是简单的编码规范。
Google javaguide 地址：http://google.github.io/styleguide/javaguide.html
这里有一份中文的翻译： http://www.blogjava.net/zh-weir/archive/2014/02/08/409608.html
</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2017/10/15/nodejs-install-environment/" title="NodeJS 初学之安装配置环境">     <img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NodeJS 初学之安装配置环境"></a></div><div class="recent-post-info"><a class="article-title" href="/2017/10/15/nodejs-install-environment/" title="NodeJS 初学之安装配置环境">NodeJS 初学之安装配置环境</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2017-10-15T07:17:16.000Z" title="发表于 2017-10-15 15:17:16">2017-10-15</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/NodeJS/">NodeJS</a></span></div><div class="content">


1.环境安装操作系统： Ubuntu 16.04.2 LTS
1.1安装nvm1ryan@ryan-900X5L:~&#x2F;temp$ curl https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;creationix&#x2F;nvm&#x2F;v0.33.4&#x2F;install.sh | bash

Note v0.33.4 is the latest version from creationix/nvm
安装好后，关闭重新打开terminal，输入nvm可以验证是否安装
安装目录默认是~/.nvm

使用淘宝镜像国内环境，使用淘宝镜像。配置环境变量，修改.bashrc追加
123# taobao npm mirrorexport NVM_NODEJS_ORG_MIRROR&#x3D;http:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;node


1.2 安装node安装最新的node
1nvm install node
或者指定node版本
1ryan@ryan-90 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2017/10/09/optional-empty-exception/" title="Optional乱用Empty之No value present">     <img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Optional乱用Empty之No value present"></a></div><div class="recent-post-info"><a class="article-title" href="/2017/10/09/optional-empty-exception/" title="Optional乱用Empty之No value present">Optional乱用Empty之No value present</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2017-10-09T12:17:08.000Z" title="发表于 2017-10-09 20:17:08">2017-10-09</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Java8/">Java8</a></span></div><div class="content">



前言看到好多文章都是推荐采用Optinal的，而经常我遇到问题的时候就想：如果设计成optional的话就不会忽略这种NullPointException错误了。然而，optional并不是想用就随便用的。今天花了10分钟追踪一个bug，根源就是optional滥用。
问题描述API返回失败，没有描述原因。看着蛋疼，因为公开的API不方便返回错误详情。于是查log，发现错误日志的message为：No value present。没搞清楚这个错误信息是哪一层跑出来的。需要进一步跟踪。A=&gt;B=&gt;C=&gt;D，一直追踪到C层才找到问题。
问题代码如下：
1234public FieldBuilder withSubcategoryId(Optional&lt;String&gt; id) &#123;    this.id = id.get();    return this;&#125;
这是一个创建工厂类，负责创建一个可以使用对象。所有的字段都采用了Opetional的包裹。这个是对象，理应不包含业务逻辑，应该没有错误异常。如果有异常应该显式的throws出来， ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2017/09/29/filter-two-list/" title="如何从两个List中筛选出相同的值">     <img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何从两个List中筛选出相同的值"></a></div><div class="recent-post-info"><a class="article-title" href="/2017/09/29/filter-two-list/" title="如何从两个List中筛选出相同的值">如何从两个List中筛选出相同的值</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2017-09-29T01:57:27.000Z" title="发表于 2017-09-29 09:57:27">2017-09-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span></div><div class="content">
问题现有社保卡和身份证若干，想要匹配筛选出一一对应的社保卡和身份证。转换为List&lt;社保卡&gt; socialList,和List idList，从二者中找出匹配的社保卡。

模型创建社保卡类
1234567891011121314151617181920212223242526272829303132333435/** * @author Ryan Miao */class SocialSecurity&#123;    private Integer id;//社保号码    private Integer idCard;//身份证号码    private String somethingElse;    public SocialSecurity(Integer id, Integer idCard, String somethingElse) &#123;        this.id = id;        this.idCard = idCard;        this.somethingElse = somethingElse;    &#125;     ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2017/09/23/why-string-is-immutable/" title="String的内存模型，为什么String被设计成不可变的">     <img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="String的内存模型，为什么String被设计成不可变的"></a></div><div class="recent-post-info"><a class="article-title" href="/2017/09/23/why-string-is-immutable/" title="String的内存模型，为什么String被设计成不可变的">String的内存模型，为什么String被设计成不可变的</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2017-09-22T16:04:43.000Z" title="发表于 2017-09-23 00:04:43">2017-09-23</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span></div><div class="content">String是Java中最常用的类，是不可变的(Immutable), 那么String是如何实现Immutable呢，String为什么要设计成不可变呢？


前言关于String,收集一波基础，来源标明最后，不确定是否权威, 希望有问题可以得到纠正。
0. String的内存模型
Java8以及以后的字符串新建时，直接在堆中生成对象，而字符创常量池位于Metaspace。必要的时候，会把堆中的指针存入Metaspace, 而不是复制。
Metaspace位于虚拟机以外的直接内存，因此大小和外部直接内存有关，但也可以通过指定参数设置-XX:MetaspaceSize=8m -XX:MaxMetaspaceSize=8m


0.1 一些真实测试，以及某些推测很难直接从百度出的中文资料中得到确切的答案，因为大多以讹传讹，未经验证。这里且做测试，先记住，因为很不情愿啃官方文档。
前期准备首先，要有字符串常量池的概念。然后知道String是怎么和常量池打交道的。这里的武器就是intern(),看一下javadoc:
1234567891011121314151617181920212223 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2017/09/18/dropwizard-feign/" title="在dropwizard中使用feign,使用hystrix">     <img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在dropwizard中使用feign,使用hystrix"></a></div><div class="recent-post-info"><a class="article-title" href="/2017/09/18/dropwizard-feign/" title="在dropwizard中使用feign,使用hystrix">在dropwizard中使用feign,使用hystrix</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2017-09-18T15:44:30.000Z" title="发表于 2017-09-18 23:44:30">2017-09-18</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Dropwiard/">Dropwiard</a></span></div><div class="content"> 
前言用惯了spring全家桶之后，试试dropwizard的Hello World也别有一帆风味。为了增强对外访问API的能力，需要引入open feign。这里简单在dropwizard中使用feign。


1. 什么Dropwizard
Dropwizard is a Java framework for developing ops-friendly, high-performance, RESTful web services. 

Dropwizard使成熟、稳定的java生态系统更加简单、轻量(light-weight), 让你更专注于业务逻辑。
Dropwizard 为配置(configuration)、统计(application metrics)、日志(logging)、operational tools提供了开箱即用的能力。让您和您的团队能够在最短的时间内开发出具有生产环境的质量的Web服务。
下面的简介来自REST微服务架构之Dropwizard
DropWizard是由Yammer开发团队贡献的一个后台服务开发框架，其集成了Java生态系统中各个问题域中最 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2017/09/12/Java-ArrayList-remove/" title="Java中ArrayList remove会遇到的坑">     <img class="post_bg" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java中ArrayList remove会遇到的坑"></a></div><div class="recent-post-info"><a class="article-title" href="/2017/09/12/Java-ArrayList-remove/" title="Java中ArrayList remove会遇到的坑">Java中ArrayList remove会遇到的坑</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2017-09-11T16:10:00.000Z" title="发表于 2017-09-12 00:10:00">2017-09-12</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span></div><div class="content">前言平时最常用的莫过于ArrayList和HashMap了，面试的时候也是问答的常客。先不去管容量、负载因子什么的，就是简单的使用也会遇到坑。



Remove 元素经常遇到的一个场景是：遍历list, 然后找到合适条件的给删除掉，比如删除所有的偶数。
1234567891011121314151617@Testpublic void testRemove2()&#123;    List&lt;Integer&gt; integers = new ArrayList&lt;&gt;(5);    integers.add(1);    integers.add(2);    integers.add(2);    integers.add(4);    integers.add(5);    for (int i = 0; i &lt; integers.size(); i++) &#123;        if (integers.get(i)%2==0)&#123;            integers.remove(i);        &#125;    &#125;   ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/6/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/8/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Ryan Miao</div><div class="author-info__description">技术总结</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">92</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">60</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">42</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ryan-miao" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:woshimrf@126.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2020/11/11/java-synchronized/" title="Java基础之Synchronized原理"><img src="https://cn.bing.com/th?id=OHR.EsskastanieD_ZH-CN9736686128_UHD.jpg&amp;rf=LaDigue_UHD.jpg&amp;pid=hp&amp;w=2880&amp;h=1620&amp;rs=1&amp;c=4" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java基础之Synchronized原理"/></a><div class="content"><a class="title" href="/2020/11/11/java-synchronized/" title="Java基础之Synchronized原理">Java基础之Synchronized原理</a><time datetime="2020-11-11T12:46:40.000Z" title="发表于 2020-11-11 20:46:40">2020-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2018/07/10/java-class-inheritance/" title="Java复习3-类的继承"><img src="https://cn.bing.com/th?id=OHR.LakotaBadlands_ZH-CN0151830089_UHD.jpg&amp;rf=LaDigue_UHD.jpg&amp;pid=hp&amp;w=2880&amp;h=1620&amp;rs=1&amp;c=4" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java复习3-类的继承"/></a><div class="content"><a class="title" href="/2018/07/10/java-class-inheritance/" title="Java复习3-类的继承">Java复习3-类的继承</a><time datetime="2018-07-10T11:58:14.000Z" title="发表于 2018-07-10 19:58:14">2018-07-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2018/07/07/java-class/" title="Java复习2-对象与类"><img src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java复习2-对象与类"/></a><div class="content"><a class="title" href="/2018/07/07/java-class/" title="Java复习2-对象与类">Java复习2-对象与类</a><time datetime="2018-07-07T07:27:14.000Z" title="发表于 2018-07-07 15:27:14">2018-07-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2018/07/06/java-data-type/" title="Java复习1-数据类型"><img src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java复习1-数据类型"/></a><div class="content"><a class="title" href="/2018/07/06/java-data-type/" title="Java复习1-数据类型">Java复习1-数据类型</a><time datetime="2018-07-06T09:03:26.000Z" title="发表于 2018-07-06 17:03:26">2018-07-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2018/07/04/springcloud-consumer/" title="SpringCloud学习6-如何创建一个服务消费者consumer"><img src="https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud学习6-如何创建一个服务消费者consumer"/></a><div class="content"><a class="title" href="/2018/07/04/springcloud-consumer/" title="SpringCloud学习6-如何创建一个服务消费者consumer">SpringCloud学习6-如何创建一个服务消费者consumer</a><time datetime="2018-07-04T11:44:12.000Z" title="发表于 2018-07-04 19:44:12">2018-07-04</time></div></div></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Cache/"><span class="card-category-list-name">Cache</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DI/"><span class="card-category-list-name">DI</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Dropwiard/"><span class="card-category-list-name">Dropwiard</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Dubbo/"><span class="card-category-list-name">Dubbo</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/English/"><span class="card-category-list-name">English</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Git/"><span class="card-category-list-name">Git</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Gradle/"><span class="card-category-list-name">Gradle</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/"><span class="card-category-list-name">Hexo</span><span class="card-category-list-count">7</span></a></li>
            <li class="card-category-list-item more is-center"><a class="card-category-list-link-more" href="/categories/">
                <span>查看更多</span><i class="fas fa-angle-right"></i></a></li>
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/ArrayList/" style="font-size: 1.1em; color: #999">ArrayList</a> <a href="/tags/CI/" style="font-size: 1.1em; color: #999">CI</a> <a href="/tags/CentOS/" style="font-size: 1.25em; color: #999fa7">CentOS</a> <a href="/tags/DI/" style="font-size: 1.1em; color: #999">DI</a> <a href="/tags/Dropwizard/" style="font-size: 1.35em; color: #99a3b1">Dropwizard</a> <a href="/tags/Dubbo/" style="font-size: 1.1em; color: #999">Dubbo</a> <a href="/tags/ELK/" style="font-size: 1.1em; color: #999">ELK</a> <a href="/tags/EhCache/" style="font-size: 1.1em; color: #999">EhCache</a> <a href="/tags/English/" style="font-size: 1.1em; color: #999">English</a> <a href="/tags/Eureka/" style="font-size: 1.2em; color: #999da3">Eureka</a> <a href="/tags/Feign/" style="font-size: 1.1em; color: #999">Feign</a> <a href="/tags/Git/" style="font-size: 1.3em; color: #99a1ac">Git</a> <a href="/tags/Gradle/" style="font-size: 1.15em; color: #999b9e">Gradle</a> <a href="/tags/Guide/" style="font-size: 1.1em; color: #999">Guide</a> <a href="/tags/Hexo/" style="font-size: 1.35em; color: #99a3b1">Hexo</a> <a href="/tags/IDEA/" style="font-size: 1.1em; color: #999">IDEA</a> <a href="/tags/Install/" style="font-size: 1.1em; color: #999">Install</a> <a href="/tags/JSON/" style="font-size: 1.1em; color: #999">JSON</a> <a href="/tags/JVM/" style="font-size: 1.1em; color: #999">JVM</a> <a href="/tags/Java/" style="font-size: 1.5em; color: #99a9bf">Java</a> <a href="/tags/Java8/" style="font-size: 1.45em; color: #99a7ba">Java8</a> <a href="/tags/Javascript/" style="font-size: 1.15em; color: #999b9e">Javascript</a> <a href="/tags/Lambda/" style="font-size: 1.15em; color: #999b9e">Lambda</a> <a href="/tags/Linux/" style="font-size: 1.3em; color: #99a1ac">Linux</a> <a href="/tags/Mac/" style="font-size: 1.2em; color: #999da3">Mac</a> <a href="/tags/MongoDB/" style="font-size: 1.2em; color: #999da3">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 1.15em; color: #999b9e">MySQL</a> <a href="/tags/Nginx/" style="font-size: 1.15em; color: #999b9e">Nginx</a> <a href="/tags/NodeJS/" style="font-size: 1.2em; color: #999da3">NodeJS</a> <a href="/tags/PostgreSQL/" style="font-size: 1.1em; color: #999">PostgreSQL</a> <a href="/tags/ReactJS/" style="font-size: 1.15em; color: #999b9e">ReactJS</a> <a href="/tags/Redis/" style="font-size: 1.1em; color: #999">Redis</a> <a href="/tags/Server/" style="font-size: 1.1em; color: #999">Server</a> <a href="/tags/Spring/" style="font-size: 1.1em; color: #999">Spring</a> <a href="/tags/SpringCloud/" style="font-size: 1.4em; color: #99a5b6">SpringCloud</a> <a href="/tags/SpringMVC/" style="font-size: 1.2em; color: #999da3">SpringMVC</a> <a href="/tags/Springboot/" style="font-size: 1.3em; color: #99a1ac">Springboot</a> <a href="/tags/Stream/" style="font-size: 1.35em; color: #99a3b1">Stream</a> <a href="/tags/Test/" style="font-size: 1.1em; color: #999">Test</a> <a href="/tags/UTF-8/" style="font-size: 1.1em; color: #999">UTF-8</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">十一月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2018/07/"><span class="card-archive-list-date">七月 2018</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2018/06/"><span class="card-archive-list-date">六月 2018</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2018/05/"><span class="card-archive-list-date">五月 2018</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2018/04/"><span class="card-archive-list-date">四月 2018</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2018/03/"><span class="card-archive-list-date">三月 2018</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2018/02/"><span class="card-archive-list-date">二月 2018</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2018/01/"><span class="card-archive-list-date">一月 2018</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item more is-center"><a class="card-archive-list-link-more" href="/archives/">
              <span>查看更多</span><i class="fas fa-angle-right"  ></i></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">92</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2020-11-12T19:12:49.038Z"></div></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/Ryan-Miao/ryan-miao.github.io/image/index.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2020 By Ryan Miao</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  $.getScript('http://yijuzhan.com/api/word.php?m=js', function () {
    var con = str[0]
    if (true) {
      var from = '出自 ' + str[1]
      var sub = "今日事&#44;今日毕,Never put off till tomorrow what you can do today".length == 0 ? new Array() : "今日事&#44;今日毕,Never put off till tomorrow what you can do today".split(',')
      var both = sub.unshift(con, from)
      var typed = new Typed('#subtitle', {
        strings: sub,
        startDelay: 300,
        typeSpeed: 150,
        loop: true,
        backSpeed: 50,
      })
    } else {
      document.getElementById('subtitle').innerHTML = con
    }
  })
}

if (true) {
  if (typeof Typed === 'function') subtitleType()
  else $.getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js', subtitleType)
} else {
  subtitleType()
}
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" async="async" mobile="false"></script><script>((window.gitter = {}).chat = {}).options = {
  room: 'Ryan-Miao/blog',
};

if (false) {
  function chatBtnHide () {
    document.getElementsByClassName('gitter-open-chat-button')[0].style.display= 'none'
  }

  function chatBtnShow () {
    document.getElementsByClassName('gitter-open-chat-button')[0].style.display= 'block'
  }
}
</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="async" defer="defer"></script></div></body></html>